<?xml version="1.0" encoding="utf-8" ?>

<odoo>

    <template id="report_production">
        <t t-foreach="docs" t-as="o">
            <t t-call="sol_purchase.document_report_production"/>
        </t>
    </template>


    <template id="document_report_production">
        <t t-call="web.basic_layout">
            <div class="header" t-att-style="report_header_style">
                <t t-set="company" t-value="res_company"></t>
                <div class="text-center">
                  <div class="row">
                    <div class="col-3 mb4">
                      <img alt="img" t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 60px;"/>
                    </div>
                    <div class="col-3"></div>
                    <div class="col-6 text-right">
                      <span t-if="company.company_details" t-field="company.company_details"/>
                    </div>
                  </div>
                </div>
            </div>
            <h2>PRODUCTION PO</h2>
            <div class="body">
                <table style="border-collapse: collapse; width: 100%; height: 85px; border: 1pt solid black;" border="1">
                    <tbody>
                        <tr style="height: 85px;">
                            <td style="width: 54.0936%; height: 85px;">
                                <table style="border-collapse: collapse; width: 100%;" border="0">
                                    <tbody>
                                        <tr>
                                            <td style="width: 37.8615%; text-align: right;"><strong>Trans No</strong></td>
                                            <td style="width: 11px;">:</td>
                                            <td style="width: 364px;">
                                                <t t-esc="o.name"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 37.8615%; text-align: right;"><strong>Trans Date</strong></td>
                                            <td style="width: 11px;">:</td>
                                            <td style="width: 364px;">
                                                <t t-esc="o.date_order" t-options="{'widget': 'date'}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 37.8615%; text-align: right;"><strong>Pending Order</strong></td>
                                            <td style="width: 11px;">:</td>
                                            <td style="width: 364px;">
                                                <t t-esc="o.sample_order_no"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="width: 37.8615%; text-align: right;"><strong>Supplier</strong></td>
                                            <td style="width: 11px">:</td>
                                            <td style="width: 364px;">
                                                <span t-field="o.partner_id"/>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                            <td style="width: 45.9064%; height: 85px;">
                                <table style="border-collapse: collapse; width: 100%; height: 73px;" border="0">
                                    <tbody>
                                        <tr style="height: 19px;">
                                            <td style="width: 22.2628%; height: 19px; text-align: right;"><strong>Delivery Date</strong></td>
                                            <td style="width: 1.7331%; height: 19px;">:</td>
                                            <td style="width: 77.1552%; height: 19px;">
                                                <t t-esc="o.date_planned" t-options="{'widget': 'date'}"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 18px;">
                                            <td style="width: 22.2628%; height: 18px; text-align: right;"><strong>Order Date</strong></td>
                                            <td style="width: 1.7331%; height: 18px;">:</td>
                                            <td style="width: 77.1552%; height: 18px;">
                                              <t t-esc="o.date_order" t-options="{'widget': 'date'}"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 18px;">
                                            <td style="width: 22.2628%; height: 18px; text-align: right;"><strong>Note</strong></td>
                                            <td style="width: 1.7331%; height: 18px;">:</td>
                                            <td style="width: 77.1552%; height: 18px;">
                                                <span t-field="o.notes"/>
                                            </td>
                                        </tr>
                                        <tr style="height: 18px;">
                                            <td style="width: 22.2628%; height: 18px;"></td>
                                            <td style="width: 1.7331%; height: 18px;"></td>
                                            <td style="width: 77.1552%; height: 18px;"></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <table border="1" cellspacing="0" style="border-collapse:collapse; border:1pt solid black; height:100px; width:100%">
                    <tbody>
                        <tr>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:94px; font-size: 11px;"><strong>Style Name</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:87px; font-size: 11px;"><strong>Fabric</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:82px; font-size: 11px;"><strong>Lining</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:86px; font-size: 11px;"><strong>Color</strong></td>
                            <td style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:38px; font-size: 11px;"><strong>Size Type</strong></td>
                            <td colspan="8" rowspan="1" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:331px; font-size: 11px;"><strong>Quantity</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:44px; font-size: 11px;"><strong>Total Qty</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:74px; font-size: 11px;"><strong>Price</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:90px; font-size: 11px;"><strong>Total</strong></td>
                            <td colspan="1" rowspan="2" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:192px; font-size: 11px;"><strong>Production Comment</strong></td>
                        </tr>
                        <t t-foreach="docs.consolidate_lines()" t-as="l">
                            <tr>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:36px; font-size: 11px;">
                                    <t t-esc="l['item_type']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:44px; font-size: 11px;">
                                    <t t-esc="l['size_column_b']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:44px; font-size: 11px;">
                                    <t t-esc="l['size_column_c']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:40px; font-size: 11px;">
                                    <t t-esc="l['size_column_d']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:37px; font-size: 11px;">
                                    <t t-esc="l['size_column_e']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:35px; font-size: 11px;">
                                    <t t-esc="l['size_column_f']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:37px; font-size: 11px;">
                                    <t t-esc="l['size_column_g']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:34px; font-size: 11px;">
                                    <t t-esc="l['size_column_h']"/>
                                </td>
                                <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:39px; font-size: 11px;">
                                    <t t-esc="l['size_column_i']"/>
                                </td>
                            </tr>
                            <t t-foreach="o.get_last_record_order()" t-as="rec">
                                <tr>
                                    <td colspan="1" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:8.0183%; font-size: 11px;">
                                        <t t-esc="l['name']"/>
                                    </td>
                                    <td colspan="1" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:87px; font-size: 11px;">
                                        <t t-esc="l['fabric']"/>
                                    </td>
                                    <td colspan="1" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:82px; font-size: 11px;">
                                        <t t-esc="l['lining']"/>
                                    </td>
                                    <td colspan="1" style="border-color:black; border-style:solid; border-width:1pt; height:18px; text-align:center; width:86px; font-size: 11px;">
                                        <t t-esc="l['colour']"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:36px; font-size: 11px;">
                                        <t t-esc="l['item_type']"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:44px; font-size: 11px;">
                                        <t t-esc="int(l['amount_b']) if l.get('amount_b') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:44px; font-size: 11px;">
                                        <t t-esc="int(l['amount_c']) if l.get('amount_c') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:40px; font-size: 11px;">
                                        <t t-esc="int(l['amount_d']) if l.get('amount_d') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:37px; font-size: 11px;">
                                        <t t-esc="int(l['amount_e']) if l.get('amount_e') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:35px; font-size: 11px;">
                                        <t t-esc="int(l['amount_f']) if l.get('amount_f') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:37px; font-size: 11px;">
                                        <t t-esc="int(l['amount_g']) if l.get('amount_g') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:34px; font-size: 11px;">
                                        <t t-esc="int(l['amount_h']) if l.get('amount_h') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:39px; font-size: 11px;">
                                        <t t-esc="int(l['amount_i']) if l.get('amount_i') is not None else ''"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:center; width:44px; font-size: 11px;">
                                        <t t-esc="int(l['amount_total'])"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:right; width:74px; font-size: 11px; padding: 5px;">
                                         <t t-esc="'{:,.0f}'.format(l['price'])"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:right; width:90px; font-size: 11px; padding: 5px;">
                                        <t t-esc="'{:,.0f}'.format(l['total'])"/>
                                    </td>
                                    <td style="border-color:black; border-style:solid; border-width:1pt; height:14px; text-align:left; width:192px; font-size: 11px; padding: 5px;">
                                        <span t-field="rec.prod_comm"/>
                                    </td>
                                </tr>
                            </t>
                        </t>
                    </tbody>
                </table>
                <p style="font-size: 11px;"><strong>Picture : </strong></p>
                <t t-foreach="o.get_last_record_order()" t-as="rec">
                    <p><img t-if="rec['image']" t-att-src="image_data_uri(rec['image'])" style="max-height:220px; max-width:225px;"/></p>
                </t>

            </div>

        </t>
  </template>
</odoo>