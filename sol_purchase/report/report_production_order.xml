<?xml version="1.0" encoding="utf-8" ?>

<odoo>

    <template id="report_po">
        <t t-foreach="docs" t-as="doc">
            <t t-call="sol_purchase.report_document_po" t-lang="doc.partner_id.lang"/>
        </t>
    </template>

    <template id="report_document_po">
        <t t-call="web.basic_layout">
            <div class="header" t-att-style="report_header_style">
                <t t-set="company" t-value="res_company"></t>
                <div class="text-center">
                  <div class="row">
                    <div class="col-3 mb4">
                      <img alt="img" t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 60px;"/>
                    </div>
                    <div class="col-3"></div>
                    <div class="col-6 text-right">
                      <span t-if="company.company_details" t-field="company.company_details"/>
                    </div>
                  </div>
                </div>
            </div>
            <h2 style="text-align: left; text-decoration: underline;">PO SUPPLIER</h2>
            <div class="body">
                <div class="container">
                <table border="1" cellpadding="1" cellspacing="1" style="width:100%">
                  	<tbody style="font-size: 15px;">
                  		<tr>
                  			<td style="width:132px; padding: 5px">Trans No</td>
                  			<td style="width:4px; padding: 5px">:</td>
                  			<td style="width:417px; padding: 5px">
                                <t t-esc="doc.name"/>
                            </td>
                  			<td style="width:158px; padding: 5px">Delivery Date</td>
                  			<td style="width:5px; padding: 5px">:</td>
                  			<td style="width:449px; padding: 5px">
                                <t t-esc="doc.effective_date" t-options="{'widget': 'date'}"/>
                            </td>
                  		</tr>
                  		<tr>
                  			<td style="width:132px; padding: 5px">Trans Date</td>
                  			<td style="width:4px; padding: 5px">:</td>
                  			<td style="width:417px; padding: 5px">
                                <t t-esc="doc.date_order" t-options="{'widget': 'date'}"/>
                            </td>
                  			<td style="width:158px; padding: 5px">Supplier</td>
                  			<td style="width:5px; padding: 5px">:</td>
                  			<td style="width:449px; padding: 5px">
                                <t t-esc="doc.partner_id.name"/>
                            </td>
                  		</tr>
                  		<tr>
                  			<td style="width:132px; padding: 5px">Cutting</td>
                  			<td style="width:4px; padding: 5px">:</td>
                  			<td style="width:417px; padding: 5px">
                                <span t-field="doc.sub_suplier"/>
                            </td>
                  			<td style="width:158px; padding: 5px">Order Date</td>
                  			<td style="width:5px; padding: 5px">:</td>
                  			<td style="width:449px; padding: 5px">
                                <t t-esc="doc.date_order" t-options="{'widget': 'date'}"/>
                            </td>
                  		</tr>
                  	</tbody>
                </table>
                </div>
                <div class="container">
                <table
                    style="table-layout: fixed; border-collapse: collapse; width: 99.9452%; margin-top: 10px; height: 20px;"
                    border="1">
                    <thead>
                        <tr style="height: 20px;">
                            <td
                                style="width: 10.8264%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Style Name</strong>
                            </td>
                            <td
                                style="width: 8.26295%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Fabric</strong>
                            </td>
                            <td
                                style="width: 8.91838%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Lining</strong>
                            </td>
                            <td
                                style="width: 7.91842%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Color</strong>
                            </td>
                            <td
                                style="width: 5.4132%; text-align: center; border: 1px solid black; padding-top: 7px;">
                                <strong>Size</strong>
                            </td>
                            <!-- <td
                                style="width: 8.86738%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Label</strong>
                            </td> -->
                            <td
                                style="width: 6.18249%; text-align: center; height: 20px; border: 1px solid black; padding-top: 7px;">
                                <strong>Total Qty</strong>
                            </td>
                            <td
                                style="width: 9.86852%; text-align: center; border: 1px solid black; padding-top: 7px;">
                                <strong>Cost Price</strong>
                            </td>
                            <td
                                style="width: 11.004%; text-align: center; border: 1px solid black; padding-top: 7px;">
                                <strong>Total</strong>
                            </td>
<!--                            <td-->
<!--                                style="width: 13.9312%; text-align: center; border: 1px solid black; padding-top: 7px;">-->
<!--                                <strong>Production Comment</strong>-->
<!--                            </td>-->
                        </tr>
                    </thead>
                    <tbody style="font-size: 15px;">
                        <t t-set="no" t-value="1"/>
                        <t t-foreach="doc.pw_ids" t-as="pw">
                          <t t-foreach="doc.order_line" t-as="order">
                            <tr style="height: 20px;">
                              <td
                                  style="width: 10.8264%; height: 20px; border: 1px solid black; padding-left: 5px;">
                                    <span t-field="pw.name"/>
                                  </td>
                              <td
                                  style="width: 8.26295%; height: 20px; border: 1px solid black; text-align: left; padding-left: 5px;">
                                    <span t-field="pw.fabric"/>
                                  </td>
                              <td
                                  style="width: 8.91838%; height: 20px; border: 1px solid black; padding-right: 3px; text-align: left; padding-left: 5px;">
                                    <span t-field="pw.lining"/>
                                  </td>
                              <td
                                  style="width: 7.91842%; height: 20px; text-align: center; border: 1px solid black; padding-right: 3px;">
                                    <t t-esc="pw.color"/>
                                  </td>
                              <td
                                  style="width: 5.4132%; text-align: center; border: 1px solid black; padding-right: 3px;">
                                    <t t-esc="pw.size"/>
                                  </td>
                              <!-- <td
                                  style="width: 8.86738%; height: 20px; border: 1px solid black; padding-right: 3px; text-align: left;">
                                    <span t-field="order.label"/>
                                  </td> -->
                              <td
                                  style="width: 6.18249%; height: 20px; text-align: right; border: 1px solid black; padding-right: 3px;">
                                    <t t-esc="pw.product_qty"/>
                                  </td>
                              <td
                                  style="width: 9.86852%; border: 1px solid black; padding-right: 3px; text-align: right;">
                                    <t t-esc="pw.price_unit" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>
                                  </td>
                              <td
                                  style="width: 11.004%; border: 1px solid black; padding-right: 3px; text-align: right;">
                                    <span t-esc="pw.product_qty*pw.price_unit" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>
                                    <!-- <t t-esc="order.price_subtotal" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/> -->
                                  </td>
<!--                              <td-->
<!--                                  style="width: 13.9312%; border: 1px solid black; padding-right: 3px; text-align: left;">-->
<!--                                    <t t-esc="pw.sample_comment "/>-->
<!--                                  </td>-->
                            </tr>
                            <t t-set="no" t-value="no + 1"/>
                          </t>
                        </t>
                    </tbody>
                </table>
                </div>
                <div class="container">
                <table
                    style="table-layout: fixed; border-collapse: collapse; width: 99.9452%; margin-top: 0px; height: 20px;"
                    border="1">
                    <thead></thead>
                    <tbody style="font-size: 15px;">
                        <tr>
                            <td
                                style="width: 10.8264%; border: 1px solid black; padding-left: 5px; border-right: 1px solid transparent;">
                                <strong>TOTAL</strong>
                            </td>
                            <td
                                style="width: 8.26295%; border: 1px solid black; text-align: left; border-right: 1px solid transparent;"></td>
                            <td
                                style="width: 8.91838%; border: 1px solid black; padding-right: 3px; text-align: left; border-right: 1px solid transparent;"></td>
                            <td
                                style="width: 7.91842%; text-align: center; border: 1px solid black; padding-right: 3px; border-right: 1px solid transparent;"></td>
                            <td
                                style="width: 5.4132%; text-align: center; border: 1px solid black; padding-right: 3px; border-right: 1px solid transparent;"></td>
                            <!-- <td
                                style="width: 8.86738%; border: 1px solid black; padding-right: 3px; text-align: left;"></td> -->
                            <td
                                style="width: 6.18249%; text-align: right; border: 1px solid black; padding-right: 3px;">
                                  <t t-esc="reduce(lambda x, obj: x+obj.product_qty, doc.pw_ids, 0)"/>
                                </td>
                            <td
                                style="width: 9.86852%; border: 1px solid black; padding-right: 3px; text-align: right;"></td>
                            <td
                                style="width: 11.004%; border: 1px solid black; padding-right: 3px; text-align: right;">
                                  <t t-esc="doc.amount_total" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>
                                </td>
<!--                            <td-->
<!--                                style="width: 13.9312%; border: 1px solid black; padding-right: 3px; text-align: left;"></td>-->
                        </tr>
                    </tbody>
                </table>
                </div>
            </div>
            <br/>
            <div class="container">
            <table border="1" cellpadding="1" cellspacing="1" style="width:100%">
            	<tbody style="font-size: 15px;">
            		<tr>
            			<td style="width:614px">
            			<table border="1" cellpadding="1" cellspacing="1" style="width:100%">
            				<tbody style="font-size: 15px;">
            					<tr>
            						<td style="width:53px"><strong>Notes</strong></td>
            						<td style="width:7px"><strong>:</strong></td>
            						<td style="width:536px"><span t-field="doc.notes"/></td>
            					</tr>
            					<tr>
            						<td style="width:53px"><strong>Picture</strong></td>
            						<td style="width:7px"><strong>:</strong></td>
            						<td style="width:536px">
            						  <t t-foreach="doc.get_last_record_order()" t-as="rec">
                                        <p><img t-if="rec['image']" t-att-src="image_data_uri(rec['image'])" style="max-height:110px; max-width:115px;"/></p>
                                    </t>
                                    </td>
            					</tr>
            				</tbody>
            			</table>
            			</td>
            			<td style="width:570px">
            			<table border="1" cellpadding="1" cellspacing="1" style="width:100%">
            				<tbody style="font-size: 15px;">
            					<tr>
            						<td style="text-align:right; width:331px">Sub total</td>
            						<td style="width:12px">:</td>
            						<td style="width:209px; text-align:right;"><span t-field="doc.amount_untaxed" widget="monetary" options="{'currency_field': 'currency_id'}"/></td>
            					</tr>
            					<tr>
            						<td style="text-align:right; width:331px">PPn</td>
            						<td style="width:12px">:</td>
            						<td style="width:209px; text-align:right;"><span t-field="doc.amount_tax" widget="monetary" options="{'currency_field': 'currency_id'}"/></td>
            					</tr>
            					<tr>
            						<td style="text-align:right; width:331px">Grand Total</td>
            						<td style="width:12px">:</td>
            						<td style="width:209px; text-align:right;"><span t-field="doc.amount_total" widget="monetary" options="{'currency_field': 'currency_id'}"/></td>
            					</tr>
            				</tbody>
            			</table>
            			</td>
            		</tr>
            	</tbody>
            </table>
            </div>
            <br/>
            <table style="border-collapse: collapse; width: 100%; background-color: transparent; border: 0; page-break-after:always;">
                <tbody style="font-size: 15px;background-color: transparent;">
                    <tr>
                        <td style="width: 20%;text-align: center; border: 1px transparent;">Prepared By,</td>
                        <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                        <td style="width: 20%;text-align: center; border: 1px transparent;">Ordered By,</td>
                        <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                        <td style="width: 20%;text-align: center; border: 1px transparent;">Approved By,</td>
                    </tr>
                    <tr style="background-color: transparent; ">
                        <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                            <br/>
                            <br/>
                            <strong>
                                ( ........................ )
                                <br/>
                            </strong>
                        </td>
                        <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                        <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                            <br/>
                            <br/>
                            <strong>
                                ( ........................ )
                                <br/>
                            </strong>
                        </td>
                        <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                        <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                            <br/>
                            <br/>
                            <strong>
                                ( ........................ )
                                <br/>
                            </strong>
                        </td>
                    </tr>
                </tbody>
            </table>

        </t>
    </template>
</odoo>