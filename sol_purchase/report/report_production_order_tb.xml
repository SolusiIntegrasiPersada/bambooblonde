<?xml version="1.0" encoding="utf-8" ?>

<odoo>
    <template id="production_order_tb">
        <t t-foreach="docs" t-as="doc">
            <t t-call="sol_purchase.document_production_order_tb"/>
        </t>
    </template>

    <template id="document_production_order_tb">
        <t t-call="web.basic_layout">
            <div class="header" t-att-style="report_header_style">
                <t t-set="company" t-value="res_company"></t>
                <div class="text-center">
                  <div class="row">
                    <div class="col-3 mb4">
                      <img alt="img" t-if="company.logo" t-att-src="image_data_uri(company.logo)" style="max-height: 60px;"/>
                    </div>
                    <div class="col-3"></div>
                    <div class="col-6 text-right">
                      <span t-if="company.company_details" t-field="company.company_details"/>
                    </div>
                  </div>
                </div>
            </div>
            <div class="body">
                <div class="container">
                <table style="border-collapse: collapse; width: 100%;" border="0">
                    <tbody>
                        <tr>
                            <td style="width: 40%;">
                                <h2>
                                    <span style="text-decoration: underline;">PO MATERIAL</span>
                                </h2>
                            </td>
                            <td style="width: 22%;"></td>
                            <td style="width: 38%;">Print Date: <t t-esc="datetime.datetime.now().strftime('%b %d, %Y %H:%M')"/></td>
                        </tr>
                    </tbody>
                </table>
                </div>
                <p></p>
                <div class="container">
                <table style="border-collapse: collapse; width: 100%; height: 72px;" border="0">
                    <tbody style="font-size: 12px;">
                        <tr style="height: 18px;">
                            <td style="width: 15%; height: 18px;">Trans No.</td>
                            <td style="width: 2%; height: 18px; text-align: center;">:</td>
                            <td style="width: 25%; height: 18px;">
                              <t t-esc="doc.name"/>
                            </td>
                            <td style="width: 2.08768%; height: 18px;"></td>
                            <td style="width: 23.0878%; height: 18px;">Supplier</td>
                            <td style="width: 2.08768%; height: 18px; text-align: center;">:</td>
                            <td style="width: 37.9228%; height: 18px;">
                              <t t-esc="doc.partner_id.name"/>
                            </td>
                        </tr>
                        <tr style="height: 18px;">
                            <td style="width: 15%; height: 18px;">Trans Date</td>
                            <td style="width: 2%; height: 18px; text-align: center;">:</td>
                            <td style="width: 25%; height: 18px;">
                              <t t-esc="doc.date_order" t-options="{'widget': 'date'}"/>
                            </td>
                            <td style="width: 2.08768%; height: 18px;"></td>
                            <td style="width: 23.0878%; height: 18px;">Production No.</td>
                            <td style="width: 2.08768%; height: 18px; text-align: center;">:</td>
                            <td style="width: 37.9228%; height: 18px;">
                              <t t-esc="doc.sample_order_no"/>
                            </td>
                        </tr>
                        <tr style="height: 18px;">
                            <td style="width: 15%; height: 18px;">Style Name</td>
                            <td style="width: 2%; height: 18px; text-align: center;">:</td>
                            <td style="width: 25%; height: 18px;">
                                <t t-esc="doc.product_mo"/>
                            </td>
                            <td style="width: 2.08768%; height: 18px;"></td>
                            <td style="width: 23.0878%; height: 18px;">Delivery Date</td>
                            <td style="width: 2.08768%; height: 18px; text-align: center;">:</td>
                            <td style="width: 37.9228%; height: 18px;">
                              <t t-esc="doc.effective_date" t-options="{'widget': 'date'}"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br/><br/>
                <table style="border-collapse: collapse; width: 100%; height: 54px;" border="0">
                    <thead style="font-size: 12px;">
                        <tr style="height: 18px;">
                            <td
                                style="width: 6.2213%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Code</td>
                            <td
                                style="width: 23.7787%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Description</td>
                            <td
                                style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">DPT</td>
                            <td
                                style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Unit</td>
                            <td
                                style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Qty</td>
                            <td
                                style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Cost Price</td>
                            <td
                                style="width: 15%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">Sub Total</td>
                        </tr>
                    </thead>
                    <tbody style="font-size: 12px;">
                        <t t-set="no" t-value="1"/>
                        <t t-foreach="doc.order_line" t-as="order">
                            <tr style="height: 18px;">
                                  <td
                                      style="width: 6.2213%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">
                                        <span t-field="order.product_id.default_code"/>
                                      </td>
                                  <td
                                      style="width: 23.7787%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">
                                        <t t-esc="order.product_id.name"/>
                                      </td>
                                  <td
                                      style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">
                                        <t t-esc="order.color_mo"/>
                                      </td>
                                  <td
                                      style="width: 10%; text-align: center; border: 1px solid black; height: 18px; padding:5px;">
                                        <span t-field="order.product_uom"/>
                                      </td>
                                  <td
                                      style="width: 10%; text-align: right; border: 1px solid black; height: 18px; padding:5px;">
                                        <t t-esc="order.product_qty"/>
                                      </td>
                                  <td
                                      style="width: 10%; text-align: right; border: 1px solid black; height: 18px; padding:5px;">
                                        <t t-esc="'{:,.0f}'.format(order.price_unit)"/>
<!--                                        <t t-esc="order.price_unit" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>-->
                                      </td>
                                  <td
                                      style="width: 15%; text-align: right; border: 1px solid black; height: 18px; padding:5px;">
                                        <t t-esc="'{:,.0f}'.format(order.price_subtotal)"/>
<!--                                        <t t-esc="order.price_subtotal" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>-->
                                      </td>
                            </tr>
                            <t t-set="no" t-value="no + 1"/>
                        </t>
                        <tr>
                            <td colspan="4" rowspan="1" style="border-color:black; border-style:solid; border-width:1px; height:18px; text-align:center; width:6.2213%; padding:5px;"><strong>TOTAL</strong></td>
                            <td style="border-color:black; border-style:solid; border-width:1px; height:18px; text-align:right; width:10%; padding:5px;"><strong>
                                <t t-esc="reduce(lambda x, obj: x+obj.product_qty, doc.order_line, 0)"/>
                            </strong></td>
                            <td style="border-color:black; border-style:solid; border-width:1px; height:18px; text-align:right; width:10%; padding:5px;"></td>
                            <td style="border-color:black; border-style:solid; border-width:1px; height:18px; text-align:right; width:15%; padding:5px;"><strong>
<!--                                <t t-esc="doc.amount_total" t-options="{'widget': 'monetary','display_currency': res_company.currency_id}"/>-->
                                    <t t-esc="'{:,.0f}'.format(doc.amount_total)"/>
                            </strong></td>
                        </tr>

                    </tbody>
                </table>
                <br/>
                <!-- <div id="total" class="row justify-content-end">
                    <div class="col-4">
                        <table class="table table-sm">
                            <t t-set="tax_totals" t-value="json.loads(doc.tax_totals_json)"/>
                            <t t-call="account.document_tax_totals"/>
                        </table>
                    </div>
                </div> -->
                <table border="0" cellpadding="1" cellspacing="1" style="width:100%; border: 1px transparent; background-color: transparent;">
                    <tbody>
                        <tr style="background-color: transparent; ">
                            <td style="width:49px; padding: 3px; border: 1px transparent;"><strong>Notes</strong></td>
                            <td style="width:7px; padding: 3px; border: 1px transparent;">:</td>
                            <td style="width:338px; padding: 3px; border: 1px transparent;">
                                <span t-field="doc.notes"/>
                            </td>
                            <td style="text-align:right; width:481px; padding: 3px; border: 1px transparent;">Sub total</td>
                            <td style="width:2px; padding: 3px; border: 1px transparent;">:</td>
                            <td style="width:241px; padding: 3px; border: 1px transparent; text-align:right;">
                                <span t-field="doc.amount_untaxed" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </td>
                        </tr>
                        <tr style="background-color: transparent; ">
                            <td colspan="3" rowspan="5" style="width:404px; border: 1px transparent;"></td>
                            <td style="text-align:right; width:157px; padding: 3px; border: 1px transparent;">PPn</td>
                            <td style="width:2px; padding: 3px; border: 1px transparent;">:</td>
                            <td style="width:241px; padding: 3px; border: 1px transparent; text-align:right;">
                                <span t-field="doc.amount_tax" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </td>
                        </tr>
                        <tr style="background-color: transparent; ">
                            <td style="text-align:right; width:157px; padding: 3px; border: 1px transparent;">Grand Total</td>
                            <td style="width:2px; padding: 3px; border: 1px transparent;">:</td>
                            <td style="width:241px; padding: 3px; border: 1px transparent; text-align:right;">
                                 <span t-field="doc.amount_total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <br/> 
                <table style="border-collapse: collapse; width: 100%; background-color: transparent; border: 0;">
                    <tbody style="font-size: 15px;background-color: transparent;">
                        <tr>
                            <td style="width: 20%;text-align: center; border: 1px transparent;">Prepared By,</td>
                            <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                            <td style="width: 20%;text-align: center; border: 1px transparent;">Ordered By,</td>
                            <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                            <td style="width: 20%;text-align: center; border: 1px transparent;">Approved By,</td>
                        </tr>
                        <tr style="background-color: transparent; ">
                            <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                                <br/>
                                <br/>
                                <strong>
                                    ( ........................ )
                                    <br/>
                                </strong>
                            </td>
                            <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                            <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                                <br/>
                                <br/>
                                <strong>
                                    ( ........................ )
                                    <br/>
                                </strong>
                            </td>
                            <td style="width: 20%;text-align: center; border: 1px transparent;"/>
                            <td style="width: 20%;text-align: center; padding: 10px; border: 1px transparent;">
                                <br/>
                                <br/>
                                <strong>
                                    ( ........................ )
                                    <br/>
                                </strong>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </t>
    </template>
</odoo>
